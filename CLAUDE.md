# King's Speech - Project Context for Claude

## Project Overview

King's Speech is a web application that provides statistics and analysis about the Danish Monarch's yearly New Year's Eve speeches. The application serves as a display layer for exploring word usage patterns, trends, and interesting trivia about these historic speeches.

**Key Purpose**: Interactive exploration tool for linguistic patterns and historical trends in Danish royal New Year's Eve speeches.

## Tech Stack

- **Framework**: Next.js 16 (App Router)
- **Frontend**: React 19, TypeScript
- **Styling**: TailwindCSS 4
- **Code Quality**: Biome (linting & formatting)
- **Data Source**: SQLite database from royal-pipes project (`/Users/vegard/Workspace/royal-pipes`)
- **Runtime**: Node.js 20+

## Architecture

### Database Strategy

The application uses a **SQLite database** generated by the royal-pipes project. This is a read-only display layer that queries the database for statistics.

**Static Site Generation**: The goal is to pre-render all pages at build time for a completely static site. If the resulting site becomes unreasonably large, we may switch to a hybrid approach with some server-side rendering.

**Display Layer Principle**: This application focuses on presentation. All statistical calculations and data processing should happen in the royal-pipes pipeline and be stored in the database. The King's Speech app just queries and displays the data.

### Data Flow

1. **Build-time**:
   - Query SQLite database from royal-pipes
   - Generate static pages for all words, trivia pages, monarchs, etc.
   - Export as static HTML/CSS/JS
2. **Runtime**:
   - Fully static site served from CDN (if possible)
   - Client-side interactions for search, filtering, etc.

## Planned Features

### Core Pages

1. **Homepage** (`/`)
   - Prominent search bar for word lookup
   - Navigation to trivia pages
   - Overview of available content

2. **Word Detail Pages** (`/word/[word]`)
   - Occurrence per year statistics
   - First appearance and last usage
   - Historical trends and patterns
   - Context snippets from speeches

3. **Trivia Pages**
   - Words used only once (hapax legomena)
   - Words most distinctive to royal speeches vs. general Danish corpus
   - Other interesting linguistic patterns

4. **Monarchs Page** (`/monarchs`)
   - Comparison of different monarchs
   - Distinctive words for each monarch
   - Metrics comparing their speeches
   - Expected to cover approximately 4 monarchs

5. **Odds Page** (`/odds`)
   - Statistics for commonly bet-upon words
   - Historical usage patterns for these words

6. **Trends Page** (tentative)
   - Temporal patterns and trends
   - Topic evolution over time

## Design System

### Color Palette

The design should feel distinctly Danish, inspired by the Danish flag (Dannebrog):

- **Primary**: Danish red (#C60C30 or similar)
- **Backgrounds**: Off-white, never pure white (#FFF)
  - Use warm off-white tones (e.g., #FAF9F7, #F8F6F4) for large areas
  - This makes the site comfortable for users accustomed to dark mode
- **Accent**: Tasteful use of white for contrast
- **Text**: Dark grays for readability against off-white backgrounds

**Design Philosophy**: Clean, readable, and respectful of the formal nature of royal speeches while being approachable and modern.

## Project Structure

```
kings-speech/
├── src/
│   ├── app/                 # Next.js App Router pages
│   │   ├── page.tsx         # Homepage with search
│   │   ├── word/[word]/     # Word detail pages
│   │   ├── monarchs/        # Monarchs comparison
│   │   ├── odds/            # Betting odds page
│   │   └── trivia/          # Trivia pages
│   ├── components/          # React components
│   └── lib/
│       └── database.ts      # SQLite database queries
├── scripts/                 # Build-time data processing
└── public/                  # Static assets
```

## Important Patterns

### Database Integration

- Read-only access to SQLite database from royal-pipes
- All queries happen at build time for static generation
- No runtime database connections in production (if fully static)

### Static Generation Strategy

- Pre-generate all word pages
- Pre-generate all trivia pages
- Pre-generate monarch comparison pages
- Search functionality can be client-side with pre-loaded index

## Development Workflow

### Local Development

```bash
npm install
npm run dev              # Start dev server on :3000
```

### Code Quality

```bash
npm run check           # Biome check (lint + format)
npm run check:fix       # Auto-fix all issues
npm run lint            # Lint only
npm run format          # Format only
```

### Production Build

```bash
npm run build           # Generate static site
npm run start           # Preview production build
```

## Design Principles

1. **Display layer only**: Complex statistics are calculated in royal-pipes pipeline
2. **Static-first**: Aim for fully static generation when possible
3. **Danish aesthetic**: Colors and design inspired by Danish flag and culture
4. **Readable and accessible**: Off-white backgrounds, good contrast, clear typography
5. **Personal project**: Not production-hardened for high-traffic use
6. **Consistency with Book Bear**: Similar tooling and patterns for maintainability

## Relationship with Royal Pipes

**Royal Pipes** (`/Users/vegard/Workspace/royal-pipes`):
- Data ingestion and processing
- Statistical calculations
- Database generation (SQLite)
- Word frequency analysis
- Corpus comparisons

**King's Speech** (this project):
- Display layer for royal-pipes data
- Interactive exploration UI
- Static site generation
- Search and filtering

## Notes for AI Assistants

- **Don't create new files unnecessarily** - prefer editing existing ones
- **Follow Book Bear patterns** - use similar tooling and conventions
- **Use Biome** - run `npm run check:fix` after changes
- **Test locally** - ensure `npm run build` succeeds before suggesting changes
- **Respect the display layer principle** - don't add statistical calculations here, they belong in royal-pipes
- **Static generation is the goal** - optimize for build-time data fetching
- **Database is read-only** - never write to the royal-pipes database from this app
- **Off-white backgrounds** - never use pure white (#FFF) for large areas
- **Ask before diverging from Book Bear setup** - consistency is valuable, but improvements are welcome if communicated
